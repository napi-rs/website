---
description: napi pre-publish command in @napi-rs/cli.
---

# Pre Publish

import { Green, Warning } from '../../../components/chalk'
import { Callout } from 'nextra-theme-docs'

Update package.json and copy addons into per platform packages

## Usage

```sh
# CLI
napi pre-publish [--options]
```

```typescript
// Programmatically
import { NapiCli } from '@napi-rs/cli'

new NapiCli().prePublish({
  // options
})
```

## Options

| Options         | CLI Options               | type             | required | default        | description                                                                                                        |
| --------------- | ------------------------- | ---------------- | -------- | -------------- | ------------------------------------------------------------------------------------------------------------------ |
|                 | --help,-h                 |                  |          |                | get help                                                                                                           |
| cwd             | --cwd                     | string           | false    | process.cwd()  | The working directory of where napi command will be executed in, all other paths options are relative to this path |
| configPath      | --config-path,-c          | string           | false    |                | Path to <Green>napi</Green> config json file                                                                      |
| packageJsonPath | --package-json-path       | string           | false    | <Green>package.json</Green> | Path to <Green>package.json</Green>                                                                               |
| npmDir          | --npm-dir,-p              | string           | false    | <Green>npm</Green>          | Path to the folder where the npm packages put                                                                      |
| tagStyle        | --tag-style,--tagstyle,-t | <Green>npm</Green> \| <Green>lerna</Green> | false    | <Green>lerna</Green>        | git tag style, <Green>npm</Green> or <Green>lerna</Green>                                                                                    |
| ghRelease       | --gh-release              | boolean          | false    | true           | Whether create GitHub release                                                                                      |
| ghReleaseName   | --gh-release-name         | string           | false    |                | GitHub release name                                                                                                |
| ghReleaseId     | --gh-release-id           | string           | false    |                | Existing GitHub release id                                                                                         |
| dryRun          | --dry-run                 | boolean          | false    | false          | Dry run without touching file system                                                                               |

<Callout>
  This command is usually used in `prepublishOnly` lifecycle scripts in
  `package.json`.
</Callout>

```json {2} filename="package.json"
"scripts": {
  "prepublishOnly": "napi prepublish -t npm"
}
```
